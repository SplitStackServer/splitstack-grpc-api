syntax = "proto3";

package common;

option go_package = "github.com/SplitStackServer/splitstack-grpc-api/go/common";
option java_package = "io.splitstack.api";
option java_multiple_files = true;
option java_outer_classname = "MetricsProto";
option csharp_namespace = "SplitStackServer.Common";
option php_namespace = "SplitStackServer\\Common";
option php_metadata_namespace = "GPBMetadata\\SplitStackServer\\Common";

import "google/protobuf/timestamp.proto";

enum Aggregation {
  // Minute.
  MINUTE = 0;
  // Quarter.
  QUARTER_HOUR = 1;
  // Hour.
  HOUR = 2;
  // Day.
  DAY = 3;
  // Week.
  WEEK = 4;
  // Month.
  MONTH = 5;
}

enum MetricKind {
  // Incrementing counters that never decrease (these are not reset on each
  // reading).
  COUNTER = 0;

  // Counters that do get reset upon reading.
  ABSOLUTE = 1;

  // E.g. a temperature value.
  GAUGE = 2;
}

message Metric {
  // Name.
  string name = 1;

  // Timestamps.
  repeated google.protobuf.Timestamp timestamps = 2;

  // Datasets.
  repeated MetricDataset datasets = 3;

  // Kind.
  MetricKind kind = 4;
}

message StringState {
  // Name.
  string name = 2;

  // Value.
  string value = 3;
}

message BooleanState {
  // Name.
  string name = 2;

  // Value.
  bool value = 3;
}

message MetricDataset {
  // Label.
  string label = 1;

  // Data.
  // Each value index corresponds with the same timestamp index of the Metric.
  repeated float data = 2;
}
